<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>CLOCHE | Login Portal</title>
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif:ital,wght@0,100..900;1,100..900&amp;family=Inter:wght@300;400;500;600&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&amp;display=swap" rel="stylesheet"/>
<script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#c1a671",
                        "background-light": "#f7f6f2",
                        "background-dark": "#0d0d0d",
                        "glass-dark": "rgba(20, 18, 15, 0.7)",
                    },
                    fontFamily: {
                        "display": ["Noto Serif", "serif"],
                        "sans": ["Inter", "sans-serif"]
                    },
                    borderRadius: {
                        "DEFAULT": "0.5rem",
                        "lg": "1rem",
                        "xl": "1.5rem",
                        "full": "9999px"
                    },
                },
            },
        }
    </script>
<style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .font-display {
            font-family: 'Noto Serif', serif;
        }
        .spotlight {
            background: radial-gradient(circle at 50% 50%, rgba(193, 166, 113, 0.08) 0%, rgba(13, 13, 13, 0) 60%);
        }
        .glass-card {
            backdrop-filter: blur(24px);
            -webkit-backdrop-filter: blur(24px);
            border: 1px solid rgba(193, 166, 113, 0.15);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
        }
        input:focus {
            box-shadow: 0 0 0 1px rgba(193, 166, 113, 0.5);
        }
    </style>
</head>
<body class="bg-background-light dark:bg-background-dark min-h-screen flex flex-col relative overflow-x-hidden">
<nav class="fixed top-0 w-full z-50">
  <div class="bg-[rgba(26,26,26,0.6)] backdrop-blur-md border-b border-[rgba(193,166,113,0.2)]">
    <div class="max-w-7xl mx-auto px-6 h-20 flex items-center justify-between">

      <!-- Logo -->
      <a href="landingpage.html" class="flex items-center gap-2 group">
  <span class="material-symbols-outlined text-primary text-3xl group-hover:scale-105 transition-transform">
    diamond
  </span>
  <span class="text-2xl font-display font-bold tracking-[0.2em] text-white group-hover:text-primary transition-colors">
    CLOCHE
  </span>
</a>

      <!-- Center Menu -->

      <!-- Right Actions -->
   

    </div>
  </div>
</nav>

<!-- Atmospheric Background Layers -->
<div class="fixed inset-0 spotlight pointer-events-none"></div>
<div class="fixed inset-0 pointer-events-none bg-[url('https://www.transparenttextures.com/patterns/stardust.png')] opacity-10"></div>
<!-- Top Navigation -->
<header class="relative z-10 flex items-center justify-between px-8 lg:px-40 py-8">
<div class="flex items-center gap-3 text-white">

</header>
<!-- Main Content: Login Portal -->
<main class="flex-1 flex items-center justify-center p-6 relative z-10">
<div class="glass-card bg-glass-dark w-full max-w-[520px] rounded-xl p-10 lg:p-16 flex flex-col items-center">
<!-- Headline Section -->
<div class="text-center mb-12">
<h1 id="loginTitle" class="font-display text-white tracking-[0.2em] text-3xl font-light mb-4">USER PORTAL</h1>
<p id="loginSubtitle" class="text-[#bab2a0] font-sans text-sm tracking-wide uppercase opacity-80">Enter your credentials to access your account</p>
</div>
<div class="w-full mb-6">
<p class="text-primary/80 text-xs font-bold uppercase tracking-widest mb-3">I am logging in as</p>
<div class="grid grid-cols-2 gap-3">
<button id="userTypeBtn" type="button" class="h-12 rounded-lg border border-primary/40 bg-primary/10 text-primary text-xs font-bold uppercase tracking-[0.12em]">User</button>
<button id="partnerTypeBtn" type="button" class="h-12 rounded-lg border border-white/10 bg-white/5 text-white/80 text-xs font-bold uppercase tracking-[0.12em]">Partner</button>
</div>
</div>
<!-- Login Form -->
<form id="loginForm" class="w-full space-y-6">
<!-- Email/Boutique ID Input -->
<div class="flex flex-col gap-2">
<label id="identifierLabel" class="text-[#f7f6f2] text-xs font-semibold tracking-[0.1em] uppercase ml-1">Email Address</label>
<div class="relative">
<input
  id="email"
  type="text"
  placeholder="Email Address"
  class="w-full h-14 px-5 bg-[#1e1b15]/50 border border-[#595140] rounded-lg text-white"
/>

</div>
</div>
<!-- Password Input -->
<div class="flex flex-col gap-2">
<div class="flex justify-between items-center mb-1">
<label class="text-[#f7f6f2] text-xs font-semibold tracking-[0.1em] uppercase ml-1">Password</label>
<a class="text-primary/70 hover:text-primary text-[10px] font-bold tracking-[0.05em] uppercase transition-colors" href="#">Recover Access</a>
</div>
<div class="relative flex items-center">
<input
  id="password"
  type="password"
  placeholder="••••••••••••"
  class="w-full rounded-lg text-white border border-white/10 bg-white/5 h-14 px-4"
/>

<button
  type="button"
  onclick="togglePassword('password', this)"
  class="absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-full
         text-white/40 hover:text-primary hover:bg-white/5 transition"
>
  <span class="material-symbols-outlined">visibility</span>
</button>

</div>
</div>
<!-- Action Button -->
<div class="pt-6">
<button id="loginSubmitBtn" class="w-full h-14 bg-primary text-background-dark font-display font-bold text-sm tracking-[0.2em] uppercase rounded-lg hover:bg-white hover:shadow-[0_0_20px_rgba(255,255,255,0.2)] transition-all duration-500 transform active:scale-[0.98]">
                        Secure Login
                    </button>
</div>
</form>
<!-- Secondary CTA -->
<div class="mt-12 text-center">
<p class="text-[#bab2a0] text-sm mb-2">New to CLOCHE?</p>
<a class="inline-block text-white font-display italic text-base border-b border-white/20 hover:border-primary transition-all duration-300" href="signup.html">
                    Create your account
                </a>
</div>
</div>
</main>
<!-- Footer -->
<footer class="relative z-10 px-8 py-10">
<div class="max-w-[1200px] mx-auto flex flex-col md:flex-row justify-between items-center gap-6">
<div class="text-[#595140] text-[10px] tracking-[0.1em] uppercase font-medium">
                © 2024 CLOCHE ATELIER. ALL RIGHTS RESERVED.
            </div>
<nav class="flex items-center gap-8">
<a class="text-[#595140] hover:text-primary text-[10px] tracking-[0.1em] uppercase font-bold transition-colors" href="#">Privacy Policy</a>
<span class="w-1 h-1 bg-[#595140] rounded-full"></span>
<a class="text-[#595140] hover:text-primary text-[10px] tracking-[0.1em] uppercase font-bold transition-colors" href="#">Terms of Service</a>
<span class="w-1 h-1 bg-[#595140] rounded-full"></span>
<a class="text-[#595140] hover:text-primary text-[10px] tracking-[0.1em] uppercase font-bold transition-colors" href="#">Support</a>
</nav>
<div class="flex gap-4">
<a class="text-[#595140] hover:text-white transition-colors" href="#">
<span class="material-symbols-outlined text-sm">language</span>
</a>
</div>
</div>
</footer>
<!-- Decorative Image Elements (Distraction-free placeholders) -->
<div class="fixed top-20 -left-20 w-96 h-96 bg-primary/5 rounded-full blur-[100px] pointer-events-none"></div>
<div class="fixed bottom-10 -right-20 w-[500px] h-[500px] bg-primary/10 rounded-full blur-[120px] pointer-events-none"></div>
<script>
const API_BASE = "https://cloche-backend.onrender.com";
let selectedAccountType = "user";

function setAccountType(type) {
  selectedAccountType = type === "partner" ? "partner" : "user";

  const userTypeBtn = document.getElementById("userTypeBtn");
  const partnerTypeBtn = document.getElementById("partnerTypeBtn");
  const title = document.getElementById("loginTitle");
  const subtitle = document.getElementById("loginSubtitle");
  const submitBtn = document.getElementById("loginSubmitBtn");
  const identifierLabel = document.getElementById("identifierLabel");
  const identifierInput = document.getElementById("email");

  if (selectedAccountType === "user") {
    if (title) title.textContent = "USER PORTAL";
    if (subtitle) subtitle.textContent = "Enter your credentials to access your account";
    if (submitBtn) submitBtn.textContent = "Secure User Login";
    if (identifierLabel) identifierLabel.textContent = "Email Address";
    if (identifierInput) identifierInput.placeholder = "Email Address";
    if (userTypeBtn) userTypeBtn.className = "h-12 rounded-lg border border-primary/40 bg-primary/10 text-primary text-xs font-bold uppercase tracking-[0.12em]";
    if (partnerTypeBtn) partnerTypeBtn.className = "h-12 rounded-lg border border-white/10 bg-white/5 text-white/80 text-xs font-bold uppercase tracking-[0.12em]";
  } else {
    if (title) title.textContent = "PARTNER PORTAL";
    if (subtitle) subtitle.textContent = "Enter your partner credentials to access your boutique dashboard";
    if (submitBtn) submitBtn.textContent = "Secure Partner Login";
    if (identifierLabel) identifierLabel.textContent = "Email Address or Phone Number";
    if (identifierInput) identifierInput.placeholder = "Email or 10-digit phone number";
    if (partnerTypeBtn) partnerTypeBtn.className = "h-12 rounded-lg border border-primary/40 bg-primary/10 text-primary text-xs font-bold uppercase tracking-[0.12em]";
    if (userTypeBtn) userTypeBtn.className = "h-12 rounded-lg border border-white/10 bg-white/5 text-white/80 text-xs font-bold uppercase tracking-[0.12em]";
  }
}

function togglePassword(inputId, btn) {
  const input = document.getElementById(inputId);
  const icon = btn.querySelector("span");
  if (!input || !icon) return;

  if (input.type === "password") {
    input.type = "text";
    icon.textContent = "visibility_off";
  } else {
    input.type = "password";
    icon.textContent = "visibility";
  }
}

document.getElementById("loginForm").addEventListener("submit", async (e) => {
  e.preventDefault();

  const identifier = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;

  if (!identifier || !password) {
    alert("Enter credentials and password");
    return;
  }

  const isUser = selectedAccountType === "user";
  const endpoint = isUser
    ? `${API_BASE}/api/auth/login-user`
    : `${API_BASE}/api/auth/login`;

  const payload = isUser
    ? { email: identifier, password }
    : { account_type: "partner", identifier, password };

  try {
    const res = await fetch(endpoint, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    const result = await res.json();

    if (!res.ok) {
      alert(result.message || "Login failed");
      return;
    }

    if (isUser) {
      localStorage.removeItem("isLoggedIn");
      localStorage.removeItem("boutiqueId");
      localStorage.removeItem("ownerName");
      localStorage.removeItem("boutiqueName");

      localStorage.setItem("isUserLoggedIn", "true");
      localStorage.setItem("userId", String(result.userId));
      localStorage.setItem("userName", result.name || "User");
      localStorage.setItem("userEmail", result.email || identifier);
      window.location.href = "index.html";
      return;
    }

    localStorage.removeItem("isUserLoggedIn");
    localStorage.removeItem("userId");
    localStorage.removeItem("userName");
    localStorage.removeItem("userEmail");

    localStorage.setItem("isLoggedIn", "true");
    localStorage.setItem("boutiqueId", String(result.boutiqueId || ""));
    localStorage.setItem("ownerName", result.ownerName || "");
    localStorage.setItem("boutiqueName", result.boutiqueName || "");
    window.location.href = "dashboard.html";
  } catch (err) {
    console.error(err);
    alert("Server error");
  }
});

document.getElementById("userTypeBtn").addEventListener("click", () => setAccountType("user"));
document.getElementById("partnerTypeBtn").addEventListener("click", () => setAccountType("partner"));
setAccountType("user");
</script>
</body></html>


